<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cif.dao.UserMapper">
    
    <select id="getAllUsers" resultType="UserBean">
        select * from users
    </select>
    
    
    <select id="getUser" resultType="UserBean">
        select * from users where id = #{id}
    </select>
    
    <select id="getUserByName" resultType="UserBean">
        select * from users where name = #{name}
    </select>

    <select id="getUserByNameAndPassword" resultType="UserBean">
        select * from users where name = #{name} and loginPassword = #{loginPassword}
    </select>

    <select id="getUserByNameAndSubmitPassword" resultType="UserBean">
        select * from users where name = #{name} and submitPassword = #{submitPassword}
    </select>

    <insert id="insertUser" parameterType="UserBean" useGeneratedKeys="true" keyProperty="id">
        insert into users(name,loginPassword,submitPassword,createdAt) 
          values( #{name},#{loginPassword},#{submitPassword},now())
    </insert>
    
    <update id="updateUser">
        update users set name = #{name}, 
        loginPassword = #{loginPassword}, 
        submitPassword = #{submitPassword}, 
        updatedAt = now()
          where id = #{id}
    </update>
    
    <delete id="deleteUser"> 
        delete from users where id = #{id} 
    </delete>

    <delete id="deleteUserRole">
        delete from user_roles where userID = #{id}
    </delete>

    <delete id="deleteWorkSpaceUserRole">
        delete from workspace_roles where userID = #{id}
    </delete>
    
</mapper>